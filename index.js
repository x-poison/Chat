const _0x2a63c5=_0x41dd;(function(_0x3da916,_0x3aa373){const _0x522fa1=_0x41dd,_0x28cc34=_0x3da916();while(!![]){try{const _0x12bb37=parseInt(_0x522fa1(0xd3))/0x1*(parseInt(_0x522fa1(0xc9))/0x2)+parseInt(_0x522fa1(0xb7))/0x3+-parseInt(_0x522fa1(0xab))/0x4*(parseInt(_0x522fa1(0xcc))/0x5)+parseInt(_0x522fa1(0xe5))/0x6*(-parseInt(_0x522fa1(0xb9))/0x7)+-parseInt(_0x522fa1(0xdf))/0x8*(-parseInt(_0x522fa1(0xaf))/0x9)+parseInt(_0x522fa1(0xe8))/0xa+parseInt(_0x522fa1(0xda))/0xb*(parseInt(_0x522fa1(0xb3))/0xc);if(_0x12bb37===_0x3aa373)break;else _0x28cc34['push'](_0x28cc34['shift']());}catch(_0x9f5b80){_0x28cc34['push'](_0x28cc34['shift']());}}}(_0x352c,0x6bab3));const express=require(_0x2a63c5(0xb4)),{Configuration,OpenAIApi}=require(_0x2a63c5(0xc3)),app=express(),cors=require(_0x2a63c5(0xc6)),fs=require('fs'),path=require(_0x2a63c5(0xd7)),multer=require(_0x2a63c5(0xba)),{v4:uuidv4}=require(_0x2a63c5(0xce));require(_0x2a63c5(0xc8))[_0x2a63c5(0xdc)]();const configuration=new Configuration({'apiKey':process['env'][_0x2a63c5(0xe0)]}),openai=new OpenAIApi(configuration);app[_0x2a63c5(0xd5)](cors()),app[_0x2a63c5(0xd5)](express[_0x2a63c5(0xd6)]()),app[_0x2a63c5(0xd5)]('/',express['static'](__dirname+'/client'));function _0x41dd(_0x49da03,_0x41cd55){const _0x352cb3=_0x352c();return _0x41dd=function(_0x41ddef,_0x2797a9){_0x41ddef=_0x41ddef-0xab;let _0x56dc93=_0x352cb3[_0x41ddef];return _0x56dc93;},_0x41dd(_0x49da03,_0x41cd55);}const upload=multer({'storage':multer[_0x2a63c5(0xc0)]({'destination':function(_0x4f0fb0,_0x307038,_0x3c65f2){const _0xe2e427=_0x2a63c5;_0x3c65f2(null,_0xe2e427(0xe2));},'filename':function(_0xd24314,_0xd1a8dc,_0x151477){const _0x50b853=_0x2a63c5,_0x5b3c89=path[_0x50b853(0xae)](_0xd1a8dc[_0x50b853(0xb8)]),_0x35400f=uuidv4()+_0x5b3c89;_0x151477(null,_0x35400f);}}),'limits':{'fileSize':0x400*0x400*0xa},'fileFilter':function(_0x4af010,_0x5d8a17,_0x9aa49e){const _0x42b4ff=_0x2a63c5,_0x210eb0=[_0x42b4ff(0xcb),'.mp4',_0x42b4ff(0xad),_0x42b4ff(0xc4),_0x42b4ff(0xbc),'.wav','.webm'],_0x10a3f7=path['extname'](_0x5d8a17[_0x42b4ff(0xb8)]);_0x210eb0[_0x42b4ff(0xb1)](_0x10a3f7)?_0x9aa49e(null,!![]):_0x9aa49e(new Error('Invalid\x20file\x20type.'));}});app['post'](_0x2a63c5(0xac),upload[_0x2a63c5(0xe3)](_0x2a63c5(0xd9)),async(_0x175724,_0xf70cbb)=>{const _0x3de3f8=_0x2a63c5;try{const _0x3ffe3e=await openai[_0x3de3f8(0xbb)](fs[_0x3de3f8(0xe1)](_0x175724[_0x3de3f8(0xdd)][_0x3de3f8(0xd7)]),_0x3de3f8(0xb6),_0x3de3f8(0xb2));return _0xf70cbb[_0x3de3f8(0xcd)](_0x3ffe3e[_0x3de3f8(0xc1)][_0x3de3f8(0xb2)]);}catch(_0x205dc4){const _0x1d2d78=_0x205dc4[_0x3de3f8(0xca)]?_0x205dc4[_0x3de3f8(0xca)][_0x3de3f8(0xc1)][_0x3de3f8(0xe6)]:''+_0x205dc4;return console['log'](_0x1d2d78),_0xf70cbb[_0x3de3f8(0xe4)](0x1f4)[_0x3de3f8(0xcd)](_0x1d2d78);}finally{fs[_0x3de3f8(0xd0)](_0x175724[_0x3de3f8(0xdd)]['path']);}}),app['post'](_0x2a63c5(0xc5),async(_0x58753b,_0x14429d)=>{const _0x2ae660=_0x2a63c5,{prompt:_0x234a51,model:model='gpt'}=_0x58753b['body'];if(!_0x234a51)return _0x14429d[_0x2ae660(0xe4)](0x190)[_0x2ae660(0xcd)]({'error':_0x2ae660(0xb0)});try{if(model==='image'){const _0x1ffd1d=await openai['createImage']({'prompt':_0x234a51,'response_format':'url','size':_0x2ae660(0xc7)});return _0x14429d[_0x2ae660(0xcd)](_0x1ffd1d[_0x2ae660(0xc1)][_0x2ae660(0xc1)][0x0][_0x2ae660(0xbf)]);}if(model==='chatgpt'){const _0x4b7592=await openai[_0x2ae660(0xe7)]({'model':_0x2ae660(0xde),'messages':[{'role':'user','content':_0x234a51}]});return _0x14429d[_0x2ae660(0xcd)](_0x4b7592[_0x2ae660(0xc1)][_0x2ae660(0xd4)][0x0]?.[_0x2ae660(0xcf)]?.[_0x2ae660(0xd1)]);}const _0x62541e=await openai[_0x2ae660(0xd2)]({'model':_0x2ae660(0xbd),'prompt':_0x2ae660(0xd8)+_0x234a51,'max_tokens':0xfa0});return _0x14429d[_0x2ae660(0xcd)](_0x62541e[_0x2ae660(0xc1)][_0x2ae660(0xd4)][0x0]['text']);}catch(_0x869ce6){const _0x53c192=_0x869ce6[_0x2ae660(0xca)]?_0x869ce6[_0x2ae660(0xca)][_0x2ae660(0xc1)]['error']:''+_0x869ce6;return console['error'](_0x53c192),_0x14429d['status'](0x1f4)[_0x2ae660(0xcd)](_0x53c192);}});function _0x352c(){const _0xe04155=['54pmOUww','error','createChatCompletion','3203180vQnGMj','762548pTmheV','/transcribe','.mpeg','extname','9IskLqj','Prompt\x20is\x20missing\x20in\x20the\x20request','includes','text','3534276QMPVmz','express','listen','whisper-1','1002957QBsMMJ','originalname','483889KySyvc','multer','createTranscription','.m4a','text-davinci-003','PORT','url','diskStorage','data','log','openai','.mpga','/get-prompt-result','cors','512x512','dotenv','16780mZrtWk','response','.mp3','15iswPBN','send','uuid','message','unlinkSync','content','createCompletion','65XQrFeI','choices','use','json','path','Please\x20reply\x20below\x20question\x20in\x20markdown\x20format.\x0a\x20','audio','11oSsQAw','env','config','file','gpt-3.5-turbo','1124440QQGglz','OPENAI_API_KEY','createReadStream','uploads/','single','status'];_0x352c=function(){return _0xe04155;};return _0x352c();}const port=process[_0x2a63c5(0xdb)][_0x2a63c5(0xbe)]||0xbb9;app[_0x2a63c5(0xb5)](port,()=>console[_0x2a63c5(0xc2)]('Listening\x20on\x20port\x20'+port));
//obfuscated code